<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Edulink Pink Edition — Secure Prompt</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#ff8dc7;
      --accent2:#2b2b2b;
      --text:#ffe3f2;
      --shadow: rgba(255,140,200,0.5);
    }
    *, *::before, *::after { box-sizing: border-box; }
    html,body{ height:100%;margin:0;padding:0; font-family:'Quicksand',sans-serif; color:var(--text);
      background:#000; background-image:url('https://wallpaperaccess.com/full/14069487.jpg'); background-size:cover; background-position:center center; background-repeat:no-repeat; position:relative;
    }
    body::before { content:''; position:absolute; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.6); z-index:0; }
    html::before {
      animation:grain 15s steps(10) infinite;
      background-image:url(https://media.discordapp.net/attachments/1129082383073824788/1137360648821538876/786b01f22de3ef61b52c17fa468fff34.gif?width=300&height=360);
      content:""; height:300%; width:300%; position:fixed; top:-110%; left:-50%; opacity:.25; pointer-events:none; z-index:9999;
    }
    @keyframes grain { 70% { transform:translate(0%,15%) } }
    .wrap{ min-height:100%; display:flex; align-items:center; justify-content:center; padding:20px; position:relative; z-index:3; }
    .window{ width:100%; max-width:400px; background:var(--accent2); border:4px solid var(--accent); border-radius:24px; box-shadow:0 10px 28px var(--shadow); position:relative; overflow:hidden; padding:24px; text-align:center; }
    .titlebar{ font-family:'Fredoka One',cursive; font-size:20px; color:var(--accent); margin-bottom:12px; }
    .logo{ margin-bottom:12px; }
    .xp-frame{ display:inline-block; background:#ffeef7; border:2px solid #d63384; border-radius:6px; padding:4px; box-shadow:inset -1px -1px #fff, inset 1px 1px #b03070, 2px 2px 6px rgba(0,0,0,0.4); }
    .xp-frame img{ max-width:100px; border-radius:2px; display:block; }
    .notice{ font-size:14px; color:var(--text); margin-bottom:18px; }
    .panel{ background:#ffeef7; border:2px solid #d63384; border-radius:6px; padding:0; box-shadow:inset -1px -1px #fff, inset 1px 1px #b03070, 0 4px 10px rgba(0,0,0,0.3); overflow:hidden; font-size:14px; }
    .panel::before{ content:"Edulink XP ✧"; display:block; background:linear-gradient(to bottom,#ff8dc7,#d63384); color:white; font-family:'Fredoka One',cursive; font-size:14px; text-align:left; padding:6px 10px; border-bottom:1px solid #a3255f; box-shadow:inset 0 1px #ffc9e1; }
    .panel form{ padding:16px; }
    label{ display:block; font-size:14px; color:#333; margin-bottom:6px; text-align:left; }
    input[type=password]{ width:100%; padding:8px; border-radius:2px; border:2px inset #d63384; background:#fff; color:#333; font-size:13px; box-shadow:inset 1px 1px #ffb3d7, inset -1px -1px #a3255f; }
    .btn-row{ display:flex; gap:12px; margin-top:14px; }
    .btn{ flex:1; padding:8px; border-radius:4px; border:2px outset #d63384; background:linear-gradient(to bottom,#ffb6dc,#d63384); cursor:pointer; font-family:'Fredoka One',cursive; font-size:13px; color:white; box-shadow:inset 0 1px #ffe1f0; }
    .btn:active{ border:2px inset #d63384; background:linear-gradient(to top,#ffb6dc,#d63384); }
    .error{ color:#d63384; margin-top:10px; font-size:13px; min-height:18px; }
    .footer{ margin-top:20px; font-size:12px; color:#ff8dc7; }
    @media (max-width:400px) { .window{ padding:16px; border-radius:20px; } .titlebar{ font-size:18px; } input[type=password]{ font-size:13px; padding:8px; } .btn{ font-size:13px; padding:8px; } }
    .bubble{ position:fixed; bottom:-60px; border-radius:50%; pointer-events:none; animation:rise linear forwards; z-index:1; }
    @keyframes rise { from{ transform:translateY(0) scale(1); opacity:0.8 } to{ transform:translateY(-120vh) scale(1.4); opacity:0 } }
    /* small testing UI */
    #testing-controls { margin-top:12px; text-align:left; color:#ff8dc7; }
    #result-iframe { width:100%; height:260px; border:1px solid #d63384; border-radius:6px; display:none; margin-top:12px; background:white; color:black; }
    #mini-note { font-size:12px; color:#ffe3f2; margin-top:8px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="window" role="dialog" aria-labelledby="win-title">
      <div class="titlebar" id="win-title">★ Edulink Pink Edition V 1.0★</div>
      <div class="logo">
        <div class="xp-frame">
          <img src="https://cdn.pfps.gg/pfps/2301-watamote.png" alt="Watamote PFP">
        </div>
      </div>
      <div class="notice">Enter your password to continue</div>
      <div class="panel" id="panel">
        <form id="pwform" autocomplete="off">
          <label for="pw">Password</label>
          <input id="pw" type="password" placeholder="••••••" aria-label="password" />
          <div class="btn-row">
            <button type="submit" class="btn">✨ Go ✨</button>
            <button type="button" class="btn" id="clearBtn">Clear</button>
          </div>
          <div class="error" id="errorMsg" aria-live="polite"></div>

          <!-- Testing controls: hidden by default, become visible once correct password entered -->
          <div id="testing-controls" aria-hidden="true" style="display:none;">
            <div id="mini-note">Testing actions (only visible after successful unlock):</div>
            <button id="open-examol" type="button" class="btn" style="margin-top:8px;">Open examol GET URL in new tab</button>
            <button id="show-iframe" type="button" class="btn" style="margin-top:8px;">Load examol into embedded iframe</button>
            <button id="do-fetch-test" type="button" class="btn" style="margin-top:8px;">Attempt fetch() (may be blocked by CORS)</button>
          </div>

        </form>
      </div>
      <div class="footer">Made by ShizukaChan~</div>

      <!-- iframe for embedding the examol response (hidden initially) -->
      <iframe id="result-iframe" title="examol result frame"></iframe>
    </div>
  </div>
  <script>
  const _storedHash = '3211ba43b8253cb6ed51f8011de2c5208b3f688c18924735c436fa6487e3fb68';
  const _u1 = 'aHR0cHM6Ly9zbWFuM2NyYi5zY2guaWQvc21hbjNjcmIvdXNlci8/Y2VrX2VYYW1PTD1RVU5I';
  const _u2 = 'VDJkUWQwaDRTa3B2Tm5KaVlXUjBlVXd2Tm1kUWFFbFdUVWMwYzA4MU5HUnNMMFZQV2pK';
  const _u3 = 'UGF6MD0mVz1LMkl2Ug==';
  const _encodedTarget = _u1 + _u2 + _u3;

  // The exact examol GET URL you requested:
  const EXAMOL_GET_URL = "https://examol.edulink.id/examol/?KataKunci=smantic&apps=eXamOL";

  async function sha256Hex(message){
    const msgBuffer = new TextEncoder().encode(message);
    const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  const form = document.getElementById('pwform');
  const pw = document.getElementById('pw');
  const err = document.getElementById('errorMsg');
  const testingControls = document.getElementById('testing-controls');
  const iframe = document.getElementById('result-iframe');

  let allowSubmitAfter = Date.now() + 300;
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    if (Date.now() < allowSubmitAfter) {
      showError('Please wait a moment and try again.');
      return;
    }
    const val = pw.value || '';
    if (!val) { showError('Please enter a password.'); pw.focus(); return; }
    try {
      const h = await sha256Hex(val);
      if (h === _storedHash) {
        // Show brief visual success
        document.body.style.transition = 'filter 240ms';
        document.body.style.filter = 'brightness(1.15)';

        // Reveal testing UI (developer/testing only)
        testingControls.style.display = 'block';
        testingControls.setAttribute('aria-hidden','false');

        // Automatically perform the requested GET actions:
        // 1) open the examol URL in a new tab (exact GET)
        try { window.open(EXAMOL_GET_URL, '_blank'); } catch(e) { console.warn('popup blocked or error opening new tab', e); }

        // 2) attempt to load it into the embedded iframe (may be blocked by X-Frame-Options)
        try {
          iframe.style.display = 'block';
          iframe.src = EXAMOL_GET_URL;
        } catch(e) {
          console.warn('iframe load failed', e);
        }

        // 3) also attempt a fetch() to read the response (will be blocked if server lacks CORS allow).
        //    This is non-critical; it's only for diagnostic purposes and prints a small snippet to console.
        try {
          fetch(EXAMOL_GET_URL, { method: 'GET', credentials: 'include' })
            .then(r => {
              console.log('fetch status:', r.status, r.statusText);
              return r.text().catch(()=>'<non-text response or CORS prevented reading body>');
            })
            .then(text => {
              console.log('fetch response snippet:', text ? text.slice(0,1200) : '(empty)');
            })
            .catch(err => console.warn('fetch error (likely CORS or network):', err));
        } catch(e) {
          console.warn('fetch attempt failed:', e);
        }

        // Preserve original behavior: decode and redirect to the encoded target
        try {
          const decoded = atob(_encodedTarget);
          setTimeout(()=>{ window.location.href = decoded; }, 800);
        } catch (errDec) {
          showError('Unexpected error decoding target.');
          console.error(errDec);
        }

      } else {
        showError('Incorrect password — try again.');
        pw.value = '';
        pw.focus();
      }
    } catch (hashErr) {
      console.error(hashErr);
      showError('An error occurred.');
    }
  });

  // Expose manual controls so you can click them after unlock
  document.getElementById('open-examol').addEventListener('click', () => {
    window.open(EXAMOL_GET_URL, '_blank');
  });
  document.getElementById('show-iframe').addEventListener('click', () => {
    iframe.style.display = 'block';
    iframe.src = EXAMOL_GET_URL;
  });
  document.getElementById('do-fetch-test').addEventListener('click', () => {
    fetch(EXAMOL_GET_URL, { method: 'GET', credentials: 'include' })
      .then(r => r.text().catch(()=>'(no text / CORS blocked)'))
      .then(t => { console.log('manual fetch snippet:', (t||'').slice(0,1200)); alert('Check console for fetch output (may be blocked by CORS)'); })
      .catch(err => { console.warn('manual fetch error:', err); alert('Fetch failed; likely CORS or network'); });
  });

  function showError(text){
    err.textContent = text;
    document.getElementById('panel').classList.add('shake');
    setTimeout(()=>document.getElementById('panel').classList.remove('shake'),420);
  }
  document.getElementById('clearBtn').addEventListener('click', ()=>{ pw.value=''; err.textContent=''; pw.focus(); });
  (function bubbleGen(){
    function createBubble(){
      const b = document.createElement('div');
      b.className = 'bubble';
      const size = 12 + Math.random()*36;
      b.style.width = b.style.height = size + 'px';
      b.style.left = (5 + Math.random()*90) + 'vw';
      const colors = ['rgba(255,182,220,0.55)','rgba(255,240,245,0.55)','rgba(210,180,255,0.45)'];
      b.style.background = colors[Math.floor(Math.random()*colors.length)];
      const dur = 8000 + Math.random()*7000;
      b.style.animationDuration = dur + 'ms';
      document.body.appendChild(b);
      setTimeout(()=>b.remove(), dur + 200);
    }
    setInterval(createBubble, 900);
  })();
  pw.focus();
  </script>
</body>
</html>
